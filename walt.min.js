/*!
 * WaltJS 2.1
 * @author Andy Mikulski <github.com/andymikulski>
 */
(function(f,n,p,q,t){f.Walt=function(l){function l(){this.settings=this.defaults;this.onBefores=[];this.onAfters=[];this.onBeforeEaches=[];this.onAfterEaches=[];return this}function m(a){a.indexOf&&(-1<a.indexOf("ms")||-1<a.indexOf("s"))||(a+="ms");return a}function r(a){return{"-webkit-animation":a||"",animation:a||""}}l.prototype={defaults:{element:p(n.body||n.documentElement),animation:"fadeIn",delay:"0s",duration:"1s",count:1,fill:"both",direction:"normal",timing:"ease",state:"paused"},target:function(a){if("undefined"===
typeof a)return this.settings.element;if(a)return a=a instanceof p?a:p(a),this.settings.element=a,this},name:function(a){if("undefined"===typeof a)return this.settings.animation;this.settings.animation=a;return this},fill:function(a){if("undefined"===typeof a)return this.settings.fill;this.settings.fill=a||"none";return this},direction:function(a){if("undefined"===typeof a)return this.settings.direction;this.settings.direction=a||"forward";return this},timing:function(a){if("undefined"===typeof a)return this.settings.timing;
this.settings.timing=a||"linear";return this},duration:function(a){if("undefined"===typeof a)return this.settings.duration;this.settings.duration=m(a);return this},delay:function(a){if("undefined"===typeof a)return this.settings.delay;this.settings.delay=m(a);return this},count:function(a){if("undefined"===typeof a)return this.settings.count;this.settings.count=a;return this},before:function(a){var b=this;if(!a)return b.onBefores;b.onBefores.push(function(c){a&&a(b.settings.element,b.settings);c&&
c(null,null)});return b},beforeEach:function(a){var b=this;if(!a)return b.onBeforeEaches;b.onBeforeEaches.push(function(c){a&&a(b.settings.element,b.settings);c&&c(null,null)});return b},after:function(a){var b=this;if(!a)return b.onAfters;b.onAfters.push(function(c){a&&a(b.settings.element,b.settings);c&&c(null,null)});return b},then:function(a){return this.after(a)},done:function(a){return this.after(a)},afterEach:function(a){var b=this;if(!a)return b.onAfterEaches;b.onAfterEaches.push(function(c){a&&
a(b.settings.element,b.settings);c&&c(null,null)});return b},pause:function(){this.settings.state="paused";return this},play:function(){this.settings.state="running";return this},resume:function(){this.settings.state="running";return this},animate:function(){q.parallel(this.onBefores,this._executeAnim.bind(this));return this},fork:function(a){var b=new l,c;for(c in this)if(a||"onBefores"!==c&&"onAfters"!==c&&"onBeforeEaches"!==c&&"onAfterEaches"!==c)b[c]=this[c];return b},_executeAnim:function(){this.play();
var a=this.settings,a=a.animation+" "+a.duration+" "+a.timing+" "+a.delay+" "+a.count+" "+a.direction+" "+a.fill+" "+a.state;this.animCount=0;this.animMax=this.settings.element.length;this.settings.element.unbind("animationend.walt").on("animationend.walt",this._onAnimEndEvent.bind(this));this.settings.element.css(r(a));return this},_onAnimEndEvent:function(a){var b=this;a=p(a.currentTarget);a.unbind("animationend.walt");a.css(r());b.animCount+=1;q.parallel(b.onAfterEaches,function(){b.animCount>
b.animMax&&b._onAnimComplete()});return b},_onAnimComplete:function(){var a=this;q.parallel(a.onAfters,function(){delete a.animCount;delete a.animMax;a.settings.element.css(r())});return a},easings:{"default":{linear:"cubic-bezier(0.250, 0.250, 0.750, 0.750)",ease:"cubic-bezier(0.250, 0.100, 0.250, 1.000)",easeIn:"cubic-bezier(0.420, 0.000, 1.000, 1.000)",easeOut:"cubic-bezier(0.000, 0.000, 0.580, 1.000)",easeInOut:"cubic-bezier(0.420, 0.000, 0.580, 1.000)"},"in":{quad:"cubic-bezier(0.550, 0.085, 0.680, 0.530)",
cubic:"cubic-bezier(0.550, 0.055, 0.675, 0.190)",quart:"cubic-bezier(0.895, 0.030, 0.685, 0.220)",quint:"cubic-bezier(0.755, 0.050, 0.855, 0.060)",sine:"cubic-bezier(0.470, 0.000, 0.745, 0.715)",expo:"cubic-bezier(0.950, 0.050, 0.795, 0.035)",circ:"cubic-bezier(0.600, 0.040, 0.980, 0.335)",back:"cubic-bezier(0.600, -0.280, 0.735, 0.045)"},out:{quad:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",cubic:"cubic-bezier(0.215, 0.610, 0.355, 1.000)",quart:"cubic-bezier(0.165, 0.840, 0.440, 1.000)",quint:"cubic-bezier(0.230, 1.000, 0.320, 1.000)",
sine:"cubic-bezier(0.390, 0.575, 0.565, 1.000)",expo:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",circ:"cubic-bezier(0.075, 0.820, 0.165, 1.000)",back:"cubic-bezier(0.175, 0.885, 0.320, 1.275)"},inOut:{quad:"cubic-bezier(0.455, 0.030, 0.515, 0.955)",cubic:"cubic-bezier(0.645, 0.045, 0.355, 1.000)",quart:"cubic-bezier(0.770, 0.000, 0.175, 1.000)",quint:"cubic-bezier(0.860, 0.000, 0.070, 1.000)",sine:"cubic-bezier(0.445, 0.050, 0.550, 0.950)",expo:"cubic-bezier(1.000, 0.000, 0.000, 1.000)",circ:"cubic-bezier(0.785, 0.135, 0.150, 0.860)",
back:"cubic-bezier(0.680, -0.550, 0.265, 1.550)"}},settingsFromObject:function(a,b,c){var d=this;c&&(d=d.fork());for(var e in a){var k;c=a[e];if(a.hasOwnProperty(e)&&"undefined"!==typeof c){switch(e){case "animation":e="name";break;case "el":e="target";break;case "onBefore":e="before";break;case "onComplete":e="then"}(k=d[e])&&"function"===typeof k?k.call(d,c):console&&console.warn&&console.warn("Walt : could not convert old setting "+e)}}return b?d.animate():d},_findKeyframesRule:function(a){var b=
n.styleSheets;if(!b)return null;for(var c=0;c<b.length;++c)if(b[c].cssRules)for(var d=0;d<b[c].cssRules.length;++d)if((b[c].cssRules[d].type==f.CSSRule.WEBKIT_KEYFRAMES_RULE||b[c].cssRules[d].type==f.CSSRule.KEYFRAMES_RULE)&&b[c].cssRules[d].name==a)return b[c].cssRules[d];return null},isNumber:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},_findAnimationKeyframes:function(a){var b=[],c;a=a.split(" ");for(var d=0;d<a.length;d++)(c=this._findKeyframesRule(a[d]))&&b.push(c);return b},_mergeAnimationKeyframes:function(a){for(var b=
{},c,d,e,k,h,g,f,l=0;l<a.length;l++)if((c=a[l])&&c.cssRules)for(d in c.cssRules)if(d&&c[d])for(e=c[d],f=e.keyText.split(","),k=f.length-1;0<=k;k--){h=b[f[k]]||{};for(g in e.style)"string"!==typeof e.style[g]||""===e.style[g]||"cssText"===g||"length"===g||this.isNumber(g)||(h[g]&&""!==h[g]&&(this.isNumber(h[g])?h[g]=Number(h[g])+Number(e.style[g]):(-1<g.toLowerCase().indexOf("transform")&&h[g].split(" "),h[g]+=e.style[g])),h[g]=e.style[g]);b[f[k]]=h}return b},compose:function(a,b,c){if(!b)return console&&
console.warn&&console.warn("Walt : compose : two arguments are required"),d;var d=this,e=d._findAnimationKeyframes(b);if(e&&e.length){b=d._mergeAnimationKeyframes(e);b=d._objectToAnimationString(a,b);if(c)return b;d.settings.animation=a;return d}console&&console.warn&&console.warn("Walt : compose : no animations found",b)},_objectToAnimationString:function(a,b){var c="",d;for(d in b){var c=c+("\t"+d+"{ \n"),e;for(e in b[d])c+="\t\t"+e+": "+b[d][e]+";\n";c+="\t} \n"}d=["@","@-webkit-"];c="keyframes "+
a+" { \n"+c+"\n}";e=[];for(var f=d.length-1;0<=f;f--)e.push(d[f]+c);this._insertNewRules(e);return e.join("\n\n")},_insertNewRules:function(a){var b=n.styleSheets;if(!b)return!1;for(var b=b[b.length-1],c=a.length-1;0<=c;c--)b.insertRule(a[c],0);return!0}};return l}(f.Walt||{});f.Walt.animate=function(f){return(new Walt).settingsFromObject(f,!0)};f.Walt.easings=f.Walt.ease=f.Walt.prototype.easings;f.Walt.compose=function(f,m){return(new Walt).compose(f,m,!0)};f.Walt.getKeyframes=function(f){var m=
new Walt;return m._mergeAnimationKeyframes(m._findAnimationKeyframes(f))}})(window,document,jQuery,async);